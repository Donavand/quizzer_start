{"ast":null,"code":"import _objectSpread from\"/Users/donavandaniels/quizzer_start/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/donavandaniels/quizzer_start/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/donavandaniels/quizzer_start/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Button}from\"react-bootstrap\";import\"./QuizExpanded.css\";import{QuizQuestion}from\"./QuizQuestion\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var QuizExpanded=function QuizExpanded(_ref){var quiz=_ref.quiz,editQuiz=_ref.editQuiz,resetView=_ref.resetView,switchEdit=_ref.switchEdit;var filteredQuestions=quiz.questionList.filter(function(q){return quiz.published&&q.published||!quiz.published;});var _useState=useState(0),_useState2=_slicedToArray(_useState,2),p=_useState2[0],sp=_useState2[1];var _useState3=useState(new Array(filteredQuestions.length)),_useState4=_slicedToArray(_useState3,2),submitArr=_useState4[0],setSubmitArr=_useState4[1];var handleQuestionSubmit=function handleQuestionSubmit(index){var newSubmitArr=_toConsumableArray(submitArr);newSubmitArr.splice(index,3,true);setSubmitArr(newSubmitArr);};var totalPoints=filteredQuestions.reduce(function(prev,q){return prev+q.points;},0);var addPoints=function addPoints(p){sp(function(prevCount){return prevCount+p;});};var reset=function reset(){setSubmitArr(new Array(filteredQuestions.length));editQuiz(quiz.id,_objectSpread(_objectSpread({},quiz),{},{questionList:quiz.questionList.map(function(q){return _objectSpread(_objectSpread({},q),{},{submission:\"\"});})}));sp(0);};var editQuestionSub=function editQuestionSub(questionId,sub){editQuiz(quiz.id,_objectSpread(_objectSpread({},quiz),{},{questionList:quiz.questionList.map(function(thisQuestion){return thisQuestion.id===questionId?_objectSpread(_objectSpread({},thisQuestion),{},{submission:sub}):thisQuestion;})}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-baseline\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:quiz.title}),/*#__PURE__*/_jsxs(\"p\",{children:[filteredQuestions.length,\" question\",filteredQuestions.length!==1?\"s\":\"\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{className:\"esc_button text-align-center\",variant:\"warning\",onClick:function onClick(){reset();switchEdit();},children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{className:\"esc_button text-align-center\",variant:\"danger\",onClick:resetView,children:\"Exit\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"desc\",children:quiz.body}),filteredQuestions.map(function(q,index){return/*#__PURE__*/_jsx(QuizQuestion,{index:index,question:q,submitted:submitArr[index],handleSubmit:handleQuestionSubmit,addPoints:addPoints,editQuestionSub:editQuestionSub},quiz.id+\"|\"+q.id);}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer\",children:[/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:reset,children:\"Reset\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"score_report\",children:[p,\"/\",totalPoints]})]})]});};","map":{"version":3,"sources":["/Users/donavandaniels/quizzer_start/src/quizzer/QuizExpanded.tsx"],"names":["React","useState","Button","QuizQuestion","QuizExpanded","quiz","editQuiz","resetView","switchEdit","filteredQuestions","questionList","filter","q","published","p","sp","Array","length","submitArr","setSubmitArr","handleQuestionSubmit","index","newSubmitArr","splice","totalPoints","reduce","prev","points","addPoints","prevCount","reset","id","map","submission","editQuestionSub","questionId","sub","thisQuestion","title","body"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { Question } from \"../interfaces/question\";\nimport { Quiz } from \"../interfaces/quiz\";\n\nimport \"./QuizExpanded.css\";\nimport { QuizQuestion } from \"./QuizQuestion\";\ninterface QuizExpandedProps {\n  quiz: Quiz;\n  editQuiz: (quizId: number, quiz: Quiz) => void;\n  resetView: () => void;\n  switchEdit: () => void;\n}\n\nexport const QuizExpanded = ({\n  quiz,\n  editQuiz,\n  resetView,\n  switchEdit,\n}: QuizExpandedProps) => {\n  const filteredQuestions = quiz.questionList.filter(\n    (q: Question): boolean => (quiz.published && q.published) || !quiz.published\n  );\n\n  const [p, sp] = useState<number>(0);\n  const [submitArr, setSubmitArr] = useState<boolean[]>(\n    new Array(filteredQuestions.length)\n  );\n\n  const handleQuestionSubmit = (index: number) => {\n    const newSubmitArr = [...submitArr];\n    newSubmitArr.splice(index, 3, true);\n    setSubmitArr(newSubmitArr);\n  };\n\n  const totalPoints = filteredQuestions.reduce(\n    (prev: number, q: Question): number => prev + q.points,\n    0\n  );\n\n  const addPoints = (p: number) => {\n    sp((prevCount) => prevCount + p);\n  };\n\n  const reset = () => {\n    setSubmitArr(new Array(filteredQuestions.length));\n    editQuiz(quiz.id, {\n      ...quiz,\n      questionList: quiz.questionList.map(\n        (q: Question): Question => ({ ...q, submission: \"\" })\n      ),\n    });\n\n    sp(0);\n  };\n\n  const editQuestionSub = (questionId: number, sub: string) => {\n    editQuiz(quiz.id, {\n      ...quiz,\n      questionList: quiz.questionList.map((thisQuestion: Question) =>\n        thisQuestion.id === questionId\n          ? { ...thisQuestion, submission: sub }\n          : thisQuestion\n      ),\n    });\n  };\n\n  return (\n    <>\n      <div className=\"d-flex justify-content-between align-items-center\">\n        <div className=\"d-flex align-items-baseline\">\n          <h1 className=\"title\">{quiz.title}</h1>\n          <p>\n            {filteredQuestions.length} question\n            {filteredQuestions.length !== 1 ? \"s\" : \"\"}\n          </p>\n        </div>\n        <div>\n          <Button\n            className=\"esc_button text-align-center\"\n            variant=\"warning\"\n            onClick={() => {\n              reset();\n              switchEdit();\n            }}\n          >\n            Edit\n          </Button>\n          <Button\n            className=\"esc_button text-align-center\"\n            variant=\"danger\"\n            onClick={resetView}\n          >\n            {\"Exit\"}\n          </Button>\n        </div>\n      </div>\n      <p className=\"desc\">{quiz.body}</p>\n      {filteredQuestions.map((q: Question, index: number) => (\n        <QuizQuestion\n          key={quiz.id + \"|\" + q.id}\n          index={index}\n          question={q}\n          submitted={submitArr[index]}\n          handleSubmit={handleQuestionSubmit}\n          addPoints={addPoints}\n          editQuestionSub={editQuestionSub}\n        ></QuizQuestion>\n      ))}\n      <hr />\n      <div className=\"footer\">\n        <Button variant=\"danger\" onClick={reset}>\n          Reset\n        </Button>\n        <span className=\"score_report\">\n          {p}/{totalPoints}\n        </span>\n      </div>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}